name: "Test: command error"

on:
  workflow_dispatch:

jobs:
  test-command-error:
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout branch
        uses: actions/checkout@v2

      - name: Run in LXC
        id: run-in-lxc
        uses: wsdfhjxc/run-in-lxc-action@v1
        with:
          distr: fedora
          release: 33
          command: exit 1 # command error

      - name: Validate error's type
        if: ${{ failure() }}
        run: errorType=${{ steps.run-in-lxc.outputs.error-type }}
